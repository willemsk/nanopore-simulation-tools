################################################################################
# params.env — Configuration file for APBS electrostatics calculations
################################################################################
# This file uses simple KEY=value format.
# - No exports, no shell substitution, no functions
# - Arrays stored as space-separated values (e.g., "value1 value2 value3")
# - Comments start with #
# - Sourced by workflow_helpers.sh and justfile recipes
################################################################################

################################################################################
# Input and output directories
################################################################################

PDB_INPUT_DIR=pdb
OUTPUT_DIR=OUTPUT

################################################################################
# PDB2PQR settings - structure protonation
################################################################################

# pH values for protonation state calculations
# Physiological range: pH 6.0-8.0
# - 7.0-7.4: Typical cytoplasmic/extracellular pH
# - 6.0: Acidic conditions (endosomes, biological fluids)
# - 8.0: Slightly alkaline conditions
PH_VALUES="7.0"

# Custom CHARMM force field files (see pdb2pqr_forcefield/README.md)
# Comment out to use standard CHARMM force field
USERFF=pdb2pqr_forcefield/mycharmm_spl2.dat
USERNAMES=pdb2pqr_forcefield/mycharmm.names

################################################################################
# APBS template files
################################################################################

# Template files with placeholders (GCENT, DIME_L, IONC, etc.)
# Substituted during input preparation stage
APBS_DUMMY_TEMPLATE=apbs_templates/apbs_dummy-TEMPLATE.in
APBS_SOLV_TEMPLATE=apbs_templates/apbs_solv-TEMPLATE.in

################################################################################
# APBS electrostatics parameters
################################################################################

# Dielectric constants
PDIE=10.0         # Protein interior dielectric (typical range: 2-20)
SDIE=80.0         # Solvent/water dielectric (water at 25°C ≈ 78-80)
MDIE=2.0          # Membrane dielectric (lipid bilayer ≈ 2-4)

# Ion parameters
IONR=2.0          # Ion exclusion radius in Ångströms (typical: 1.5-2.5 Å)

# Ionic strength values (molar concentration)
# Physiological ionic strength ≈ 0.15 M (150 mM NaCl equivalent)
# Range 0.05-0.30 M typical for studying ionic strength effects
IONC_VALUES="0.15"

################################################################################
# Membrane geometry parameters
################################################################################
# These parameters define the lipid bilayer geometry for draw_membrane2
# Values are MSpA-specific; adjust for different proteins

# Membrane center position along Z-axis (Ångströms)
# Coordinate where bilayer center plane intersects pore axis
ZMEM=-18

# Membrane thickness (Ångströms)
# Typical lipid bilayer: 30-40 Å
# Defines dielectric boundary region
LMEM=36

# Membrane potential offset (Volts)
# Set to 0.0 for zero-bias calculations
MEMV=0.0

# Cylindrical exclusion radii (Ångströms)
# Define membrane shape around pore
# R_TOP: Radius at top (extracellular side)
# R_BOTTOM: Radius at bottom (intracellular side)
R_TOP=23.2
R_BOTTOM=17.5

################################################################################
# APBS grid settings
################################################################################
# Grid dimensions must satisfy: dime = c × 2^(nlev+1) + 1
# where c and nlev are positive integers (typically nlev=4)
#
# Valid dimensions for nlev=4 and c=1 to 22 include:
#   33, 65, 97, 129, 161, 193, 225, 257, 289, 321, 353, 385,
#   417, 449, 481, 513, 545, 577, 609, 641, 673, 705, ...
#
# Grid spacing vs. accuracy trade-off:
# - Larger spacing (10-15 Å): Faster, lower resolution
# - Smaller spacing (0.5-2 Å): Slower, higher resolution
#
# Grid size vs. coverage:
# - Increase DIME to cover larger regions
# - All protein atoms must be within grid bounds
# - APBS will error if atoms are "off the mesh"

################################################################################
# Active configuration: coarse grid (fast testing)
################################################################################

# Grid center coordinates (x, y, z) in Ångströms
# Should be centered on region of interest (typically protein center)
GCENT="0 0 30"

# Coarse grid spacing (x, y, z) in Ångströms
# Used for initial focusing calculation
GRID_L="15 15 15"

# Fine grid spacing (x, y, z) in Ångströms
# Used for final high-resolution calculation
# Set equal to GRID_L for single-grid calculation
GRID_S="5 5 5"

# Coarse grid dimensions (nx, ny, nz)
# Number of grid points in each direction
DIME_L="65 65 65"

# Fine grid dimensions (nx, ny, nz)
# Set equal to DIME_L for single-grid calculation
DIME_S="65 65 65"

################################################################################
# Alternative configuration: fine grid (high accuracy, slower)
################################################################################
# Uncomment these lines and comment out coarse settings above for production runs
# Computation time increases significantly with finer grids

# GCENT="0 0 30"
# GRID_L="2.0 2.0 2.0"    # 2 Å coarse spacing
# GRID_S="0.5 0.5 0.5"    # 0.5 Å fine spacing (very high resolution)
# DIME_L="417 417 449"    # Larger grid to maintain coverage
# DIME_S="417 417 449"

################################################################################
# Runtime options
################################################################################

# Enable verbose output from scripts
VERBOSE=true
